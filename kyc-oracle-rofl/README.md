```markdown
# Oasis ROFL KYC 預言機系統 - 白話 Demo 指南
---

## 故事背景

假設你是一個投資平台，需要驗證用戶身份才能讓他們交易。但你面臨幾個問題：

- 用戶的身份資訊很敏感，不想放在中心化伺服器
- 驗證結果要透明，用戶要信任
- 不同平台重複驗證浪費資源

**解決方案**：用區塊鏈記錄身份驗證結果，讓大家都看得到。

---

## 系統怎麼運作

### 角色

1. **用戶小王**：要在投資平台開帳戶
2. **ROFL 中介**：我們的服務，負責驗證身份
3. **身份驗證系統**：公司內部的 KYC 系統
4. **區塊鏈**：永遠記錄驗證結果的帳本
5. **其他平台**：需要查詢小王的身份時

---

## Demo 流程（白話版）

### 第一幕：服務啟動

我現在打開 ROFL 中介服務...

```
go run main.go
```

看到這些訊息：

```
🚀 服務啟動
✅ 連接到區塊鏈
✅ 安全讀取敏感資訊
✅ 準備接收驗證請求
```

**意思是**：我們的中介已經準備好了，連接到區塊鏈，並安全地保護好了私鑰等敏感資訊。

---

### 第二幕：檢查系統健康

用戶或其他平台想知道「ROFL 服務現在能用嗎？」

```
curl http://localhost:8080/health
```

回答：

```
{
  "status": "healthy",
  "contract": "0xBc685fD012Ef800fc60D3BE435d4f5b3b22c147D",
  "features": {
    "支援驗證": true,
    "支援祕密管理": true,
    "支援區塊鏈查詢": true
  }
}
```

**意思是**：服務一切正常，已經準備好驗證用戶。

---

### 第三幕：小王要求驗證

小王說：「我要驗證身份，我的錢包地址是 0x37d8f4aC...」

```
curl -X POST http://localhost:8080/verify \
  -H "Content-Type: application/json" \
  -d '{
    "user_address": "0x37d8f4aC0b11D13Ab148bB9FF053F9C3379CfF2E",
    "document_id": "ABC123",
    "document_type": "passport"
  }'
```

系統回答：「請求已收到，我幫你處理」

```
{
  "status": "success",
  "message": "驗證中..."
}
```

**幕後發生了什麼**：

ROFL 中介說：「我收到小王的驗證請求了」

```
🔍 開始驗證小王的身份
```

然後 ROFL 去問內部 KYC 系統：「小王的文件 ABC123 是真的嗎？」

```
📋 查詢 KYC 系統...
    回答：真的，他是合法投資人，風險等級 10 分
```

ROFL 說：「好，那我寫一個簽名，證明我驗證過小王」

```
✅ 產生驗證證明
```

然後 ROFL 在區塊鏈上寫下：「我驗證了小王，他是合法的」

```
✅ 交易已提交到區塊鏈
   交易編號：0x3eed2228...
```

最後 ROFL 說：「完成了！」

```
✨ 驗證完成
```

---

### 第四幕：其他平台查詢

過了一個禮拜，另一個投資平台「股票交易所」想知道：「小王能不能在我這裡開帳戶？」

他們直接查區塊鏈：「小王（0x37d8f4aC...）已經通過驗證了嗎？」

區塊鏈回答：「是的，已驗證。」

股票交易所說：「好，那小王可以開帳戶，不用重複驗證。」

**意思是**：驗證結果一次記錄，全平台使用。

---

## Oasis 技術（白話解釋）

### 1. ROFL 中介（Runtime Off-chain Logic）

```
傳統方式：
用戶 → 投資平台 (驗證) → 區塊鏈 (記錄)

Oasis ROFL 方式：
用戶 → ROFL 中介 (驗證 + 簽署) → 區塊鏈 (只記錄結果)
```

好處：驗證在鏈下快速進行，區塊鏈只記錄最終結果。

**日誌看到「ROFL 功能」** = 中介在驗證用戶

---

### 2. Secrets 祕密管理

ROFL 中介有什麼祕密需要保護？

- 私鑰（用來簽署區塊鏈交易的鑰匙）
- API 金鑰（用來呼叫內部 KYC 系統）

**目前做法**：
祕密存在 .env 檔案，ROFL 讀取時保護好

**未來做法**（生產環境）：
祕密加密存在區塊鏈上，只有 ROFL 能解密讀取

**日誌看到「使用 Secrets」** = 祕密已安全載入

---

### 3. REST API

就是讓外面的人可以用簡單的 HTTP 請求呼叫我們的服務

```
POST /verify   = 「幫我驗證用戶」
GET  /health   = 「你現在還好嗎？」
```

**日誌看到「REST API」** = 服務已開放，接受請求

---

### 4. Sapphire-ROFL 互操作

Oasis Sapphire 是一個「隱私友善」的區塊鏈

ROFL 中介連接到 Sapphire，把驗證結果寫上去

好處：區塊鏈交易自動加密，隱私有保障

**日誌看到「連接到 Oasis Sapphire」** = 區塊鏈已連接，準備記錄

**日誌看到「交易已提交」** = 驗證結果已永久記錄

---

### 5. roflEnsureAuthorizedOrigin

這是個「防冒充」機制

```
問題：會不會有人冒充 ROFL 中介，虛假驗證？

解決方案：
區塊鏈上有個規則：
「只有真正的 ROFL 中介能更新驗證結果」

任何冒充者都會被擋住。
```

**日誌看到「roflEnsureAuthorizedOrigin」** = 安全驗證已啟動

---

## 完整故事線

```
⏰ 09:00 - ROFL 中介早上上班
  ↓
  服務啟動，連接到區塊鏈
  ✅ 一切就緒

⏰ 09:30 - 小王想開帳戶
  ↓
  發送驗證請求給 ROFL

⏰ 09:31 - ROFL 開始驗證
  ↓
  ROFL: 「收到小王的請求」
  ROFL: 「去問 KYC 系統...」
  KYC: 「小王是真人，文件有效」
  ROFL: 「好的，我寫個簽名」
  ROFL: 「寫到區塊鏈去」
  區塊鏈: 「收到，記錄下來」

⏰ 09:33 - 完成
  ↓
  ROFL: 「驗證完成！」
  小王: 「太好了，我可以交易了」

⏰ 一週後 - 股票交易所查詢
  ↓
  交易所: 「小王通過驗證了嗎？」
  區塊鏈: 「是的」
  小王: 「不用重複驗證，真棒！」
```

---

## 系統的三大優勢

### 1. 隱私保護

用戶的身份資訊：
- ❌ 不會存在服務商伺服器
- ❌ 不會存在區塊鏈上
- ✅ 只在鏈下 ROFL 中介安全處理

區塊鏈上只記錄：「小王已驗證」，沒有敏感資訊

### 2. 省錢（節省 Gas 費用）

傳統方式：
```
每次驗證都要在區塊鏈上執行複雜運算 = 貴
```

ROFL 方式：
```
複雜驗證在鏈下快速完成 = 便宜
區塊鏈只記錄結果 = 省 Gas
```

### 3. 信任透明

區塊鏈特性：
- 驗證結果永久記錄
- 任何人都能查詢
- 無法篡改
- 不需信任任何一方

---

## 快速命令（複製貼上用）

**終端 1 - 啟動服務**
```
cd kyc-oracle-rofl
go run main.go
```

**終端 2 - 檢查服務**
```
curl http://localhost:8080/health | jq
```

**終端 2 - 驗證小王**
```
curl -X POST http://localhost:8080/verify \
  -H "Content-Type: application/json" \
  -d '{"user_address":"0x37d8f4aC0b11D13Ab148bB9FF053F9C3379CfF2E","document_id":"DOC001","document_type":"passport"}'
```

**Remix - 查詢小王狀態**
```
isKYCVerified("0x37d8f4aC0b11D13Ab148bB9FF053F9C3379CfF2E")
// 返回: true
```

---

## Demo 時的演講稿

「大家好，我現在展示一個用 Oasis 區塊鏈驗證用戶身份的系統。

首先，我們的 ROFL 中介已經啟動，連接到 Oasis Sapphire 區塊鏈。敏感資訊已安全保護。

現在讓我模擬一個用戶小王要求驗證...

ROFL 中介收到請求，查詢內部 KYC 系統，得到驗證結果。然後簽署交易，把結果寫到區塊鏈上。

你看這個交易哈希，已經永久記錄。

現在任何其他平台都可以查詢小王的驗證狀態，不需要重複驗證。

這就是『不需信任的 KYC 預言機』—— 一次驗證，全網使用，無法篡改，完全透明。」

---

## 系統優勢總結

| 優勢 | 說明 |
|------|------|
| 隱私 | 敏感資訊不上鏈 |
| 便宜 | 複雜運算在鏈下完成 |
| 透明 | 驗證結果鏈上永久記錄 |
| 便利 | 多平台共享驗證結果 |
| 安全 | 無法冒充，無法篡改 |

---

完！這樣是不是清楚多了？🎉
```